namespace = pw_non_religious

# Select Brethren School
country_event = {
	id = pw_non_religious.01
	title = "pw_non_religious.01.t"
	desc = "pw_non_religious.01.d"
	picture = RELIGION_eventPicture
	
	major = no
	
	trigger = {
		has_dlc = "Cradle of Civilization"
		religion = pw_pirate_code
		OR = {
			has_religious_school = no
		}
	}

	is_triggered_only = yes
	
	option = {
		name = pw_non_religious.1.a #Gives areas historical school of region
		trigger = {
			ai = yes
		}
		if = { #Viking in Northern Europe or in Scandinavian Culture Group
			limit = {
				OR = {
					capital_scope = {
						OR = {
							region = scandinavia_region
							region = low_countries_region
							region = north_german_region
							region = south_german_region
							region = russia_region
							region = british_isles_region
							region = ireland_area
							region = baltic_region
						}
					}
					OR = {
						culture_group = scandinavian #Initially just Scandinavian, but figured other Germanics should be able to get it
						culture_group = british
						culture_group = germanic
					}	
				}	
			}
			set_religious_school = {
				group = pw_nonassociated
				school = viking_school
			}
		}
		else_if = { #Berber in North Africa
			limit = {
				OR = {
					capital_scope = {
						OR = {
							region = maghreb_region
							region = egypt_region
						}
					}
					culture = tunisian
					culture = algerian
					culture = moroccan
				}
			}
			set_religious_school = {
				group = pw_nonassociated
				school = barbary_school
			}
		}
		else_if = { #Wokou in East Asia
			limit = {
				OR = {
					capital_scope = {
						OR = {
							superregion = far_east_superregion
							superregion = china_superregion
							region = manchuria_region
							region = east_siberia_region
						}
					}
					culture_group = japanese_g
				}	
			}
			set_religious_school = {
				group = pw_nonassociated
				school = japanese_school
			}
		}
		else_if = { #Malay in East Indies
			limit = {
				OR = {
					capital_scope = {
						OR = {
							superregion = east_indies_superregion
						}
					}
					culture_group = malayan
				}
			}
			set_religious_school = {
				group = pw_nonassociated
				school = malayan_school
			}
		}
		else = { #Remaining Brethren get this:
			set_religious_school = {
				group = pw_nonassociated
				school = caribbean_school
			}
		}
	}
	option = {
		name = pw_non_religious.1.b #Viking
		trigger = {
			religion = pw_pirate_code
			ai = no
		}
		set_religious_school = {
			group = pw_nonassociated
			school = viking_school
		}
	}
	option = {
		name = pw_non_religious.1.c #Berber
		trigger = {
			religion = pw_pirate_code
			ai = no
		}
		set_religious_school = {
			group = pw_nonassociated
			school = barbary_school
		}
	}
	option = {
		name = pw_non_religious.1.d #Wokou
		trigger = {
			religion = pw_pirate_code
			ai = no
		}
		set_religious_school = {
			group = pw_nonassociated
			school = japanese_school
		}
	}
	option = {
		name = pw_non_religious.1.e #Malay
		trigger = {
			religion = pw_pirate_code
			ai = no
		}
		set_religious_school = {
			group = pw_nonassociated
			school = malayan_school
		}
	}
	option = {
		name = pw_non_religious.1.f #Caribbean (generic fallback)
		trigger = {
			religion = pw_pirate_code
			ai = no
		}
		set_religious_school = {
			group = pw_nonassociated
			school = caribbean_school
		}
	}
}

province_event = { #Remember religion before Secular
	id = pw_non_religious.02
	title = "pw_non_religious.02.t"
	desc = "pw_non_religious.02.d"
	picture = RELIGION_eventPicture
	
	major = no
	hidden = yes
	
	trigger = {
		owner = { religion = pw_secular }
	}

	immediate = {
		hidden_effect = {
			export_to_variable = {
				which = pre_secular_religion_var
				value = religion
			}
		}
	}
	option = {
		name = null
	}
}		

province_event = { #Remove Secular from a province reverting to previous religion
	id = pw_non_religious.03
	title = "pw_non_religious.03.t"
	desc = "pw_non_religious.03.d"
	picture = RELIGION_eventPicture
	major = no
	hidden = yes
	
	trigger = {
		religion = pw_secular
	}

	is_triggered_only = yes
	
	option = {
		change_religion = variable:pre_secular_religion_var
	}
}	

province_event = { #Spread Irreligious
	id = pw_non_religious.04
	title = "pw_non_religious.04.t"
	desc = "pw_non_religious.04.d"
	picture = RELIGION_eventPicture
	major = no
	hidden = yes
	
	trigger = {
		OR = {
			AND = {
				owner = { religion = pw_secular }
				enlightenment = 90
			}
			any_neighbor_province = {
				religion = pw_irreligious
			}	
		}	
	}

	mean_time_to_happen = {
		years = 250 #Generally a very slow process, even today there are barely any majority irreligious provinces, with the exception of state enforced areas
		modifier = {
			factor = 0.1
			owner = {
				has_country_modifier = pw_state_atheism #Down to 25 years
			}	
		}
	}	
	
	option = {
		change_religion = pw_irreligious
	}
}	

country_event = { #Turn Irreligious countries Secular
	id = pw_non_religious.05
	title = "pw_non_religious.04.t"
	desc = "pw_non_religious.04.d"
	picture = RELIGION_eventPicture
	major = no
	hidden = yes
	
	trigger = {
		religion = pw_irreligious
	}

	is_triggered_only = yes
	
	option = {
		change_religion = pw_secular
	}
}